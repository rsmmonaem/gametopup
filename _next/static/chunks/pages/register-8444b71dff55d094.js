(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[495],{8740:function(e,a,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/register",function(){return r(72)}])},72:function(e,a,r){"use strict";r.r(a);var n=r(5893),s=r(2175),l=r(9008),t=r(1664),o=r(1163),i=r(7294),c=r(3645),d=r.n(c),u=r(4231),m=r(3513),h=r(4950),f=r(2077),p=r(1907),v=r(9763),b=r(2082),x=r(4811),w=r(7537),g=r(8604),_=r(8313);function j(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}var y={username:"",phone:"",email:"",password:"",confirm_password:""},N=u.Ry().shape({username:u.Z_().required().trim().label("Username"),phone:u.Z_().required().matches(/(^(\+88|0088)?(01){1}[13456789]{1}(\d){8})$/,"Phone number must be a valid phone number").trim().label("Phone"),email:u.Z_().required().email().trim().lowercase().label("Email"),password:u.Z_().required().trim().label("Password"),confirm_password:u.Z_().required().oneOf([u.iH("password"),null],"Confirm password not matched with password").trim().label("Confirm Password")});a.default=function(){var e,a=(0,i.useState)(!1),r=a[0],c=a[1],u=(0,i.useState)(!1),P=u[0],Z=u[1],k=(0,i.useContext)(_.globalContext).saveAuthUser,O=(0,o.useRouter)(),E=null===O||void 0===O||null===(e=O.query)||void 0===e?void 0:e[x.ly];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.default,{children:(0,n.jsxs)("title",{children:["Register ",x.OA]})}),(0,n.jsx)("div",{className:"container",children:(0,n.jsxs)("div",{className:"w-full sm:w-[380px] md:w-[650px] _form_wrapper relative",children:[r&&(0,n.jsx)("div",{className:"_absolute_full"}),(0,n.jsx)("h3",{className:"_h3",children:"Register"}),P&&(0,n.jsx)(h.Z,{className:"mt-7",type:"error",title:P}),(0,n.jsxs)("div",{className:"relative !mt-7",children:[r&&(0,n.jsx)("div",{className:"_absolute_full _flex_center bg-white/75",children:(0,n.jsx)(p.Z,{size:20,className:"text-primary-500"})}),(0,n.jsx)(d(),{onRequest:function(){c(!0),Z(null)},clientId:"551937735612-odei9u5tjd1hp5ckaaogfsa4bs6oi4hg.apps.googleusercontent.com",buttonText:"Signup with Google",scope:"profile",onSuccess:function(e){var a=e.getAuthResponse();m.ZP.post("/google-signup",{idToken:null===a||void 0===a?void 0:a.id_token}).then((function(e){var a,r=null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.data,n=r.user,s=r.token;k(n,s,!0)})).catch((function(e){c(!1),Z((0,g.FU)(e))}))},onFailure:function(e){console.log(e),Z((null===e||void 0===e?void 0:e.details)||"Something went wrong. Try again"),c(!1)},className:"w-full !rounded-full block _flex_center !shadow-none !text-gray-600 !border !border-gray-200 hover:!border-gray-400 !duration-150 focus:!bg-white"})]}),(0,n.jsxs)("div",{className:"mt-8 relative",children:[(0,n.jsx)("span",{className:"_subtitle2 absolute z-10 left-1/2 top-1/2 -translate-y-1/2 -translate-x-1/2 bg-white py-1 px-2",children:"Or"}),(0,n.jsx)(v.Z,{})]}),(0,n.jsxs)("div",{className:"mt-8",children:[(0,n.jsx)(s.J9,{initialValues:y,validationSchema:N,onSubmit:function(e,a){var r=a.setSubmitting,n=a.setFieldError,s=a.resetForm;r(!1),Z(!1),c(!0),m.ZP.post("/register",function(e){for(var a=1;a<arguments.length;a++){var r=null!=arguments[a]?arguments[a]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(a){j(e,a,r[a])}))}return e}({},e)).then((function(e){var a=e.data.data,r=a.user,n=a.token;s(),k(r,n,!0,E)})).catch((function(e){var a,s;r(!0);var l=null===e||void 0===e||null===(a=e.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.errors;(null===l||void 0===l?void 0:l.length)>0?l.forEach((function(e){n(e.param,e.msg)})):Z((0,g.FU)(e))})).finally((function(){c(!1)}))},children:function(e){var a=e.handleSubmit;return(0,n.jsxs)("form",{className:"flex flex-col gap-4",children:[(0,n.jsxs)("div",{className:"_grid_2",children:[(0,n.jsx)(b.Z,{name:"username",label:"Username",placeholder:"Username"}),(0,n.jsx)(b.Z,{name:"phone",label:"Phone",placeholder:"Phone"})]}),(0,n.jsx)(b.Z,{name:"email",type:"email",label:"Email",placeholder:"Email"}),(0,n.jsxs)("div",{className:"_grid_2",children:[(0,n.jsx)(b.Z,{name:"password",type:"password",label:"Password",placeholder:"Password"}),(0,n.jsx)(b.Z,{name:"confirm_password",type:"password",label:"Confirm Password",placeholder:"Confirm Password"})]}),(0,n.jsx)(f.Z,{type:"submit",loading:r,className:"w-full",onClick:a,children:"Create account"})]})}}),(0,n.jsxs)("div",{className:"flex mt-3.5 items-center justify-center flex-wrap gap-1.5 _subtitle2",children:["Have an account?",(0,n.jsx)(t.default,{href:"".concat(w.Z.login.name).concat((0,g.u)(O)),children:(0,n.jsx)("a",{className:"_link",children:"Login here"})})]})]})]})})]})}}},function(e){e.O(0,[141,90,774,888,179],(function(){return a=8740,e(e.s=a);var a}));var a=e.O();_N_E=a}]);